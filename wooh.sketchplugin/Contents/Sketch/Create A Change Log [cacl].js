var globalThis=this,global=this;function __skpm_run(e,t){globalThis.context=t;try{var n=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t){e.exports=require("sketch")},function(e,t){e.exports=require("sketch/dom")},function(e,t){e.exports=require("sketch/ui")},function(e,t){e.exports=require("sketch/settings")},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(1).Page,i=n(1).Group,u=n(2),s=o.a.Text,f=o.a.getSelectedDocument(),c=f.selectedLayers.layers,l=n(3);Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e};var g=(new Date).format("yyyy-MM-dd"),d=(new Date).format("yyyy-MM-dd hh:mm:ss");t.default=function(){var e,t,n,r,p;-1===f.pages.findIndex((function(e){return"🗞️ChangeLog"===e.name}))&&((e=new a({name:"🗞️ChangeLog"})).parent=f),-1===(e=f.pages.find((function(e){return"🗞️ChangeLog"===e.name}))).layers.findIndex((function(e){return e.name===g}))&&(t=new i({name:g}),n=0===e.layers.length?0:e.layers[0].frame.y+e.layers[0].frame.height+50,t.parent=e,t.index=0,t.frame.x=0,t.frame.y=n,t.frame.width=0,t.frame.height=0),t=e.layers[0];for(var h=new String,m=new String,y=0,x=0,b=c.length;x<b;x++)"Artboard"===c[x].type?(r=c[x].name,p=c[x].id):"Artboard"===c[x].getParentArtboard().type?(r=c[x].getParentArtboard().name,p=c[x].getParentArtboard().id):(r=void 0,p=void 0),-1===h.indexOf(r)&&(h=h+"\n"+(y+=1)+"."+r,m=m+"_next_"+p);y>0?u.getInputFromUser("已选中"+y+"个画板:"+h,{initialValue:"Enter Change Log",numberOfLines:3},(function(e,n){if(!e){var r=new s({text:"⌨️ 更新说明：\n"+n+"\n🖱️ 关联页面:"+h,parent:t});r.name=d,r.frame.x=0,r.frame.y=t.frame.height+20,r.index=0,r=t.layers[0],l.setLayerSettingForKey(r,"ArtboardIds",m),t.adjustToFit(),o.a.UI.message("Succeed In Logging")}})):o.a.UI.message("请至少选中1个画板")}}]);if("default"===e&&"function"==typeof n)n(t);else{if("function"!=typeof n[e])throw new Error('Missing export named "'+e+'". Your command should contain something like `export function " + key +"() {}`.');n[e](t)}}catch(r){if("undefined"==typeof process||!process.listenerCount||!process.listenerCount("uncaughtException"))throw r;process.emit("uncaughtException",r,"uncaughtException")}}globalThis.onRun=__skpm_run.bind(this,"default");